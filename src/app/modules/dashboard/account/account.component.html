<div class="flex flex-col gap-4 px-8 py-10 max-w-3xl w-full">
  <form [formGroup]="infoForm" (submit)="updateInfo()">
    <h2 class="text-xl">Informations personnelles</h2>
    <p class="text-secondary">Mettez à jour vos informations personnelles.</p>
    <!-- @if (state.infoError || state.infoErrors.length > 0) {
      <fuse-alert class="mt-8" appearance="soft" type="error" [showIcon]="true" [@shake]="true">
        {{ state.infoError }}
        <span *ngIf="state.infoErrors.length > 0">{{ state.infoErrors | APIValidationError }}</span>
      </fuse-alert>
    }
    @if (state.infoSuccess) {
      <fuse-alert class="mt-8" appearance="soft" type="success" [showIcon]="true" [@shake]="true">
        {{ state.infoSuccess }}
      </fuse-alert>
    } -->

    <file-pond
      class="cursor-pointer bg-gray-100 rounded-md mt-6 mb-4"
      [options]="pondOptions"
      (onprocessfile)="processFile($event)" />
    <div class="grid w-full gap-2 grid-cols-1 md:grid-cols-2 md:gap-6">
      <mat-form-field class="w-full">
        <mat-label>Nom</mat-label>
        <input formControlName="first_name" autocomplete="off" matInput />
      </mat-form-field>
      <mat-form-field class="w-full">
        <mat-label>Postnom</mat-label>
        <input formControlName="last_name" autocomplete="off" matInput />
      </mat-form-field>
      <mat-form-field class="w-full">
        <mat-label>Prénom</mat-label>
        <input formControlName="name" autocomplete="off" matInput />
      </mat-form-field>

      <mat-form-field class="w-full">
        <mat-label>Adresse</mat-label>
        <input formControlName="address" autocomplete="off" matInput />
      </mat-form-field>

      <mat-form-field class="w-full">
        <mat-label>Email</mat-label>
        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:envelope'" matPrefix></mat-icon>
        <input formControlName="email" autocomplete="off" matInput />
      </mat-form-field>
      <mat-form-field class="w-full">
        <mat-label> Numéro de téléphone </mat-label>
        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:phone'" matPrefix></mat-icon>
        <input formControlName="phone_number" autocomplete="off" matInput />
      </mat-form-field>
    </div>
    <button class="text-white mb-10 mt-2" mat-flat-button type="submit" [color]="'primary'">
      <span>Enregistrer les modifications</span>
      <!-- @if (state.infoIsLoading) {
        <mat-progress-spinner [diameter]="24" [mode]="'indeterminate'"></mat-progress-spinner>
      } -->
    </button>
  </form>

  <form [formGroup]="securityForm" (submit)="updatePassword()">
    <h2 class="text-xl">Changer le mot de passe</h2>
    <p class="text-secondary">Soyez prudent avec les informations sensibles.</p>
    <!-- @if (state.securityError || state.securityErrors.length > 0) {
      <fuse-alert class="mt-8" appearance="soft" type="error" [showIcon]="true" [@shake]="true">
        {{ state.securityError }}
        <span *ngIf="state.securityErrors.length > 0">{{ state.securityErrors | APIValidationError }}</span>
      </fuse-alert>
    }
    @if (state.securitySuccess) {
      <fuse-alert class="mt-8" appearance="soft" type="success" [showIcon]="true" [@shake]="true">
        {{ state.securitySuccess }}
      </fuse-alert>
    } -->

    <div class="grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-6 mt-6">
      <div class="md:col-span-2">
        <mat-form-field class="w-full">
          <mat-label> Mot de passe actuel </mat-label>
          <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:key'" matPrefix></mat-icon>
          <input formControlName="old_password" type="password" matInput />
        </mat-form-field>
      </div>
      <mat-form-field class="w-full">
        <mat-label> Nouveau mot de passe </mat-label>
        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:key'" matPrefix></mat-icon>
        <input formControlName="password" type="password" matInput />
      </mat-form-field>
      <mat-form-field class="w-full">
        <mat-label> Confirmer le mot de passe </mat-label>
        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:key'" matPrefix></mat-icon>
        <input formControlName="password_confirm" type="password" matInput />
      </mat-form-field>
    </div>

    <button class="text-white mb-10 mt-8" mat-flat-button type="submit" [color]="'primary'">
      <span>Enregistrer les modifications</span>
      <!-- @if (state.securityIsLoading) {
        <mat-progress-spinner [diameter]="24" [mode]="'indeterminate'"></mat-progress-spinner>
      } -->
    </button>
  </form>
</div>
